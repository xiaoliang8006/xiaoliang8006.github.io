---
layout: post
title:  docker使用总结
date: 2019-08-22
tags: 博客
---

## 容器的创建和使用

1)下载镜像

    $ docker pull ubuntu:16.04
    $ docker pull centos:7.2.1511
    # 推荐lamp镜像: http://blog.topspeedsnail.com/archives/4162

2)创建容器

    $ docker run -itd ubuntu:16.04 /bin/bash
    # 或者详细指定
    $ sudo docker run -d --name=centos7.2 -p 80:80 -p 81:81 -p 3306:3306 --privileged=true centos:7.2.1511 /usr/sbin/init
3)然后我们使用`docker ps`查看到该容器ID信息，接下来就进入该容器:

    $ docker attach CONTAINER_ID
    # 或者指定名称
    $ sudo docker exec -it centos7.2 /bin/bash

注：`Ctrl + q + p`是退出容器但保持后台运行，`exit`命令是退出并关闭容器。

4)删除容器和镜像 复制文件

    https://blog.csdn.net/qq_32447301/article/details/79387649

5)ubuntu直接一键安装lamp:

    $ tasksel install lamp-server
    # 手动搭建lamp
    # https://my.oschina.net/kangvcar/blog/1807837

## 容器打包成镜像并保存到dockerhub

1)首先登录dockerhub

    $ docker login

2)查看容器的信息找出CONTAINER ID

    $ docker ps

3)把所需上传的容器变为镜像

    $ docker commit -m "info" -a "author" [CONTAINER ID] [新的镜像名称]

4)接下来为存在于本地的镜像打标签

    $ docker tag imageName dockerUserName/xxx[:tag]

注：imageName为你需要上传的镜像name，dockerUserName为dockerHub的登录名，xxx为仓库名，必须和你在dockerhub中新建的仓库名相同，tag不指定就是latest。

5)打包好之后，就把打包好的镜像上传

    $ docker push dockerUserName/xxx[:tag]

注：tag不指定就是latest

最后去dockerhub上查看是否上传成功!
