---
layout: post
title:  Git分支版本管理笔记
date: 2020-11-07
tags: 博客
---

## 1. 修改代码并compare

查看当前修改和上次commit后的区别

	git diff

已经提交过，又想修改某些文件，但是想放到同一次的commit事件中：

	git add .
	git commit --amend --no-edit

## 2. 回到过去和未来

	# 回到某个历史commit_id
	git reset --hard 77730b6
	# 回到前k步
	git reset --hard HEAD~k  # k为正整数，表示向上走k步
	# 显示包括未来的所有commit_id
	git reflog


如果在当前分支下的某个commit\_id节点重新add & commit后，git会自动使用一个新的commit\_id覆盖当前分支该commit\_id之后的所有记录。

## 3. 显示分支图

	# 显示当前分支版本图
	git log --oneline --graph
	# 显示所有分支版本图
	git log --oneline --graph --all


## 4. 显示所有冲突文件

	git status
	或者
	git diff --name-only --diff-filter=U

## 5. 合并冲突
### 5.1 merge分支冲突

	# 直接merge
	git merge dev
	# 若想保留merge信息可以使用
	git merge --no-ff -m "merge info 1" dev
	# 如有冲突要手动解决冲突，然后
	git commit -am "merge info 2: solve conflict"

### 5.2 rebase分支冲突(比较危险，建议少用)

	# 修改主分支历史，将主分支状态重新基于当前分支
	git rebase dev

## 6. stash暂存区

将代码保存至暂存区，然后可以做其他事情

	git add .
	git stash
	
做完其他事情，回来后恢复代码继续happy coding

	git stash pop